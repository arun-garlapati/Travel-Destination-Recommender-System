"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8316],{35829:function(e,n,t){t.d(n,{$:function(){return l}}),t(15231),t(470);var l=(0,t(31162).$)("e6bb8e3145aeb3ac7dd3c571f5d31901a472292d")},30816:function(e,n,t){t.d(n,{VN:function(){return s},b8:function(){return a},rb:function(){return i}}),t(15231),t(470);var l=t(31162),a=(0,l.$)("628aa9e3847e651b1bb3740de178bf1dbb6c9ed0"),i=(0,l.$)("7a1d9d62457619a18119f4fb6c58e254644a991e");n.ZP=(0,l.$)("76be1998881c4c8daf6394f7a973c8892c26ce82");var s=(0,l.$)("e10f8923128660455f9ee02ca5c24885eb379768")},65970:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var l=t(57437),a=t(72759),i=t(80504),s=t(2265),r=t(35829),o=t(18707);function d(e){let{searchParams:n}=e,[t,d]=(0,s.useState)([]),[u,c]=(0,s.useState)(0),[p,m]=(0,s.useState)(!1),{city:h="",days:g=-1}=n;return(0,l.jsxs)(l.Fragment,{children:[t.map(e=>(0,l.jsx)(o.xu,{publicTrip:e},e.id)),(0,l.jsx)("button",{onClick:()=>{let e=Number(u)+10;m(!0),(0,r.$)({city:h,days:g,limit:10,offset:e}).then(e=>{d(n=>[...n,...e])}).finally(()=>{m(!1),c(e)})},disabled:p,className:"col-span-1 mx-auto mt-12 flex w-fit items-center justify-center gap-1 rounded-full border border-solid border-accent-red bg-white px-8 py-1 text-accent-red transition-all hover:bg-accent-red hover:text-white sm:col-span-2 md:col-span-3 lg:col-span-4",children:p?(0,l.jsx)("span",{className:"mx-auto w-fit",children:(0,l.jsx)(i.G,{icon:a.LM3,className:"animate-spin"})}):(0,l.jsx)("span",{children:"Load more"})})]})}},48094:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var l=t(57437),a=t(72759),i=t(80504),s=t(67248),r=t(39190),o=t(24033),d=t(2265),u=t(70812),c=t(5096);function p(){return(0,d.useEffect)(()=>{(async function(){let{bouncy:e}=await t.e(1329).then(t.bind(t,41329));e.register()})()},[]),(0,l.jsx)("l-bouncy",{size:24,speed:"1",color:"gray"})}var m=e=>{let{results:n,handlerSelectValue:t,selectValue:a,loading:i,open:s,setOpen:r,handleChange:o,optionLabel:d,zeroPlacesFound:m,renderOption:h,placeholder:g,StylesComponent:v,required:f=!0,disabled:x=!1,autoFocus:b=!1}=e;return(0,l.jsx)(c.Z,{fullWidth:!0,children:(0,l.jsx)(u.Z,{sx:{display:"inline-block","& input":{width:200,fontFamily:"'Fredoka', sans-serif",bgcolor:"background.paper",fontSize:"15px",color:e=>e.palette.getContrastText(e.palette.background.paper)}},freeSolo:!0,id:"place",disableClearable:!0,onChange:(e,n)=>{t(n)},open:s,onOpen:()=>r(!0),onClose:()=>r(!1),value:a,options:n,loading:i,disabled:x,noOptionsText:"No places found",autoHighlight:!0,getOptionLabel:d,loadingText:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(p,{}),(0,l.jsx)("span",{children:(null==m?void 0:m.noResults)?"No places found":"Loading places"})]}),renderOption:h,renderInput:e=>(0,l.jsx)(v,{...e,onChange:o,required:f,InputProps:{...e.InputProps,type:"text"},placeholder:g})})})},h=t(82447),g=t(78255);let v=(0,r.Z)(s.Z)({borderRadius:"0.5rem",padding:"0 !important",fontFamily:"'Fredoka', sans-serif",fontSize:"1.125rem","& label.Mui-focused":{color:"#A0AAB4"},"& .MuiInput-underline:after":{borderBottomColor:"#B2BAC2",padding:"0 !important"},"& .MuiOutlinedInput-root":{padding:"8px 12px !important",paddingBottom:"8px !important","& fieldset":{border:"1px solid #eeeeee",borderRadius:"0.5rem","@media screen and (max-width: 45.625rem)":{padding:"0"}},"&:hover fieldset":{border:"1px solid #bdbdbd"},"&.Mui-focused fieldset":{border:"1px solid #9b8df1"}},"& .MuiOutlinedInput-root > *":{padding:"0 !important",fontSize:"1.125rem"}});function f(){var e,n,t;let[s,r]=(0,d.useState)(null),u=(0,o.useSearchParams)(),c=(0,o.useRouter)(),p=(0,o.usePathname)(),f=null!==(e=u.get("offset"))&&void 0!==e?e:0,x=null!==(n=u.get("days"))&&void 0!==n?n:-1,b=null!==(t=u.get("city"))&&void 0!==t?t:"",{results:y,loading:j,open:w,setOpen:N,setAutocompleteSearch:S,zeroPlacesFound:P}=(0,h.o)(),k=e=>{r(e);let n=new URLSearchParams(u);n.set("city",null==e?void 0:e.name),c.replace("".concat(p,"?").concat(n.toString())),(0,g.KY)(e.name,parseInt(null==x?void 0:x.toString()))},C=e=>{let n=new URLSearchParams(u);-1!==e?n.set("days",e.toString()):n.delete("days"),c.replace("".concat(p,"?").concat(n.toString())),(0,g.KY)(b,parseInt(null==e?void 0:e.toString()))};return(0,l.jsxs)("div",{className:"mx-auto mt-8 flex w-full max-w-2xl gap-2",children:[(0,l.jsx)(m,{loading:j,zeroPlacesFound:null==P?void 0:P.noResults,open:w,setOpen:N,results:y,handleChange:e=>{var n;S(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},placeholder:"Search a city",optionLabel:e=>(null==e?void 0:e.name)||"",renderOption:(e,n)=>(0,l.jsx)("li",{...e,children:null==n?void 0:n.name}),handlerSelectValue:e=>k(e),StylesComponent:v,required:!1,selectValue:s,disabled:!1}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"days-select",className:"sr-only",children:"Select days"}),(0,l.jsxs)("select",{id:"days-select",onChange:e=>{C(e.target.value)},value:x,className:"focus:border-tp-purple-2 max-w-[100px] cursor-pointer rounded-lg border border-solid border-gray-200 px-3 py-2 outline-none hover:border-gray-400",children:[(0,l.jsx)("option",{value:-1,children:"Days"}),[...Array(10)].map((e,n)=>(0,l.jsxs)("option",{value:n+1,children:[n+1," ",n+1===1?"Day":"Days"]},n))]})]}),(0!==f||-1!==x||""!==b)&&(0,l.jsx)("button",{onClick:()=>{let e=new URLSearchParams(u);e.delete("offset"),e.delete("days"),e.delete("city"),c.replace("".concat(p,"?").concat(e.toString())),r({name:null}),S("")},className:"text-primary right-0 ml-1 rounded-full px-3 py-1 hover:bg-gray-100",children:(0,l.jsx)(i.G,{icon:a.paY})})]})}},18707:function(e,n,t){t.d(n,{Uc:function(){return i},xu:function(){return m}});var l=t(57437),a=t(21677);function i(){return(0,l.jsx)("div",{className:"grid grid-cols-1 gap-8 pb-20 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[...Array(8)].map((e,n)=>(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(a.Z,{variant:"rounded",animation:"wave",width:"100%",height:170}),(0,l.jsxs)("div",{className:"mt-2 flex w-full gap-2",children:[(0,l.jsx)(a.Z,{variant:"circular",animation:"wave",width:35,height:30}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(a.Z,{variant:"text",animation:"wave",width:"100%"}),(0,l.jsx)(a.Z,{variant:"text",animation:"wave",width:"100%"})]})]})]},n))})}t(65970);var s=t(72759),r=t(80504),o=t(16691),d=t.n(o),u=t(61396),c=t.n(u),p=t(71157);function m(e){var n,t,a,i,o,u,m,h,g,v,f,x;let{publicTrip:b}=e,y=b.trip,j=y.image&&0!==Object.keys(null!==(f=y.image)&&void 0!==f?f:{}).length,w=j&&(null==y?void 0:null===(n=y.image)||void 0===n?void 0:n.photo_reference)?"https://storage.googleapis.com/maps-photos-prod/".concat(null==y?void 0:null===(t=y.image)||void 0===t?void 0:t.photo_reference,"/").concat((null===(a=y.image)||void 0===a?void 0:a.widths.includes("480"))?"480":"original",".jpg"):null===(i=y.image)||void 0===i?void 0:i.source;return(0,l.jsxs)(c(),{href:"/".concat(p.B.PUBLIC_TRIPS,"/").concat(y.id),className:"group relative cursor-pointer",children:[(0,l.jsx)(d(),{src:null!=w?w:"/shared/dummy-image.webp",width:480,height:270,className:"h-[10.5rem] rounded-lg object-cover",alt:b?null===(o=b.en)||void 0===o?void 0:o.title:""}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("h2",{className:"mb-1 line-clamp-1 text-lg font-medium group-hover:underline",children:b?null===(u=b.en)||void 0===u?void 0:u.title:null}),(0,l.jsx)("p",{className:"line-clamp-2 text-sm text-gray-700",children:b?null===(m=b.en)||void 0===m?void 0:m.description:null})]}),(0,l.jsxs)("div",{className:"mt-5 flex items-center justify-between md:mt-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(d(),{src:null!==(x=null===(h=y.user)||void 0===h?void 0:h.photo_url)&&void 0!==x?x:"/dummy-user.webp",alt:null===(g=y.user)||void 0===g?void 0:g.display_name,width:20,height:20,className:"rounded-full"}),(0,l.jsx)("span",{className:"line-clamp-1 text-sm",children:null===(v=y.user)||void 0===v?void 0:v.display_name})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"text-sm",children:(0,l.jsxs)("span",{children:[null==y?void 0:y.destinations_summary[0].days," ",(null==y?void 0:y.destinations_summary[0].days)===1?"Day":"Days"]})}),(0,l.jsx)("span",{className:"mx-0.5 text-xl",children:"â€¢"}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)(r.G,{icon:s.m6i,className:"w-4 text-red-400"}),(0,l.jsx)("span",{className:"text-sm",children:null==b?void 0:b.likes})]})]})]})]})}t(35829),t(48094)},82447:function(e,n,t){t.d(n,{o:function(){return s}});var l=t(2265),a=t(30816);let i=[{name:"Goa, India",center:[15.50195,73.91009],boundaries:{ne:[15.7975387573,74.3419036865],sw:[14.8625049591,73.6296844482]},sights_count:99},{name:"Paris, France",center:[48.85341,2.3488],boundaries:{ne:[49.03356694704047,2.6042489194755207],sw:[48.670322030624696,2.1084049608796893]},sights_count:100},{name:"Rome, Latium, Italy",center:[41.89193,12.51133],boundaries:{ne:[41.98942097197372,12.615249866611695],sw:[41.79461305370221,12.379309999999998]},sights_count:98},{name:"New York, NY, United States",center:[40.742185,-73.992602],boundaries:{ne:[40.882214,-73.907],sw:[40.679548,-74.047285]},sights_count:100},{name:"Istanbul, Turkey",center:[41.01384,28.94966],boundaries:{ne:[41.583896981907635,29.95880097737308],sw:[40.80260400000006,27.971700000085676]},sights_count:99}],s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"search-destinations",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[s,r]=(0,l.useState)(!1),[o,d]=(0,l.useState)(""),[u,c]=(0,l.useState)(t?i:[]),[p,m]=(0,l.useState)({noResults:!1,queryLength:null}),[h,g]=(0,l.useState)(""),[v,f]=(0,l.useState)(!1),[x,b]=(0,l.useTransition)();return(0,l.useEffect)(()=>{d(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(let l=0;l<e;l++)n+=t[Math.floor(Math.random()*t.length)];return n}())},[]),(0,l.useEffect)(()=>{if(p.queryLength&&h.length>=p.queryLength)return;if(m({noResults:!1,queryLength:null}),h.length<=1){c(t?i:[]);return}f(h.length>3);let l=setTimeout(async()=>{h.length>3&&b(async()=>{let t;switch(e){case"search-hotels":t=await (0,a.rb)(h,o,n);break;case"search-destinations":t=await (0,a.b8)(h,o);break;case"foursquare":t=await (0,a.ZP)(h,o,n,"foursquare");break;case"google-maps":t=await (0,a.ZP)(h,o,n,"google-maps")}f(!1),console.log({places:t.length}),m({noResults:0===t.length,queryLength:0===t.length?null==h?void 0:h.length:null}),c(t||[])})},300);return()=>{f(!1),clearTimeout(l)}},[h]),{results:u,setResults:c,loading:v,open:s,setOpen:r,sessionToken:o,autocompleteSearch:h,setAutocompleteSearch:g,zeroPlacesFound:p,setLoading:f}}},78255:function(e,n,t){t.d(n,{Dt:function(){return i},FP:function(){return s},KY:function(){return r},W3:function(){return a},y9:function(){return o}});var l=t(86222);let a=e=>{(0,l.t7)("Trip Settings Clicked",null==e?void 0:e.id,(0,l.iv)(e),null)},i=(e,n,t)=>{(0,l.t7)("Public Trip Title Changed",null==e?void 0:e.id,(0,l.iv)(e),null,{"Title Changed":n,"Description Changed":t})},s=e=>{(0,l.t7)("View Public Trip Version",null==e?void 0:e.id,(0,l.iv)(e),null)},r=(e,n)=>{(0,l.t7)("Public trips Search",null,[e],null,{Destination:e,Days:n})},o=e=>{var n;(0,l.t7)("Public Trip Like",null==e?void 0:null===(n=e.trip)||void 0===n?void 0:n.id,(0,l.iv)(null==e?void 0:e.trip),null,{Days:null==e?void 0:e.days})}}}]);