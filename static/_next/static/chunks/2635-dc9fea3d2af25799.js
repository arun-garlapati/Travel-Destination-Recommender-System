"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2635],{30622:function(e,t,n){var s=n(2265),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var s,a={},l=null,d=null;for(s in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,s)&&!c.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:r,type:e,key:l,ref:d,props:a,_owner:i.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},57437:function(e,t,n){e.exports=n(30622)},22635:function(e,t,n){n.d(t,{eA:function(){return K},zB:function(){return Y},w7:function(){return G},kP:function(){return D}});var s=n(57437),r=n(2265);class a extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let n=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?" .":""}Read more at ${n}`}}class o extends a{}o.kind="signIn";class i extends a{}i.type="AdapterError";class c extends a{}c.type="AuthorizedCallbackError";class l extends a{}l.type="CallbackRouteError";class d extends a{}d.type="ErrorPageLoop";class u extends a{}u.type="EventError";class f extends a{}f.type="InvalidCallbackUrl";class p extends o{}p.type="CredentialsSignin";class h extends a{}h.type="InvalidEndpoints";class w extends a{}w.type="InvalidCheck";class y extends a{}y.type="JWTSessionError";class v extends a{}v.type="MissingAdapter";class g extends a{}g.type="MissingAdapterMethods";class E extends a{}E.type="MissingAuthorize";class _ extends a{}_.type="MissingSecret";class S extends o{}S.type="OAuthAccountNotLinked";class x extends o{}x.type="OAuthCallbackError";class m extends a{}m.type="OAuthProfileParseError";class L extends a{}L.type="SessionTokenError";class b extends o{}b.type="OAuthSignInError";class R extends o{}R.type="EmailSignInError";class k extends a{}k.type="SignOutError";class U extends a{}U.type="UnknownAction";class T extends a{}T.type="UnsupportedStrategy";class C extends a{}C.type="InvalidProvider";class A extends a{}A.type="UntrustedHost";class $ extends a{}$.type="Verification";class P extends o{}P.type="MissingCSRF";class N extends a{}class O extends a{}async function I(e,t,n,s={}){let r=`${M(t)}/${e}`;try{let e={headers:{"Content-Type":"application/json",...s?.headers?.cookie?{cookie:s.headers.cookie}:{}}};s?.body&&(e.body=JSON.stringify(s.body),e.method="POST");let t=await fetch(r,e),n=await t.json();if(!t.ok)throw n;return n}catch(e){return n.error(new N(e.message,e)),null}}function M(e){return"undefined"==typeof window?`${e.baseUrlServer}${e.basePathServer}`:e.basePath}function j(){return Math.floor(Date.now()/1e3)}function X(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let n=new URL(e??t),s=("/"===n.pathname?t.pathname:n.pathname).replace(/\/$/,""),r=`${n.origin}${s}`;return{origin:n.origin,host:n.host,path:s,base:r,toString:()=>r}}var H=n(62601);let B={baseUrl:X(H.env.NEXTAUTH_URL??H.env.VERCEL_URL).origin,basePath:X(H.env.NEXTAUTH_URL).path,baseUrlServer:X(H.env.NEXTAUTH_URL_INTERNAL??H.env.NEXTAUTH_URL??H.env.VERCEL_URL).origin,basePathServer:X(H.env.NEXTAUTH_URL_INTERNAL??H.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}};function F(){return"undefined"!=typeof BroadcastChannel?new BroadcastChannel("next-auth"):{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}}let W={debug:console.debug,error:console.error,warn:console.warn},z=r.createContext?.(void 0);function D(e){if(!z)throw Error("React Context is unavailable in Server Components");let t=r.useContext(z),{required:n,onUnauthenticated:s}=e??{},a=n&&"unauthenticated"===t.status;return(r.useEffect(()=>{if(a){let e=`/api/auth/signin?${new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href})}`;s?s():window.location.href=e}},[a,s]),a)?{data:t.data,update:t.update,status:"loading"}:t}async function V(e){let t=await I("session",B,W,e);return(e?.broadcast??!0)&&F().postMessage({event:"session",data:{trigger:"getSession"}}),t}async function J(){let e=await I("csrf",B,W);return e?.csrfToken??""}async function q(){return I("providers",B,W)}async function Y(e,t,n){let{callbackUrl:s=window.location.href,redirect:r=!0}=t??{},a=M(B),o=await q();if(!o){window.location.href=`${a}/error`;return}if(!e||!(e in o)){window.location.href=`${a}/signin?${new URLSearchParams({callbackUrl:s})}`;return}let i="credentials"===o[e].type,c="email"===o[e].type,l=`${a}/${i?"callback":"signin"}/${e}`,d=await J(),u=await fetch(`${l}?${new URLSearchParams(n)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:d,callbackUrl:s})}),f=await u.json();if(r||!(i||c)){let e=f.url??s;window.location.href=e,e.includes("#")&&window.location.reload();return}let p=new URL(f.url,a).searchParams.get("error");return u.ok&&await B._getSession({event:"storage"}),{error:p,status:u.status,ok:u.ok,url:p?null:f.url}}async function G(e){let{callbackUrl:t=window.location.href}=e??{},n=M(B),s=await J(),r=await fetch(`${n}/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:s,callbackUrl:t})}),a=await r.json();if(F().postMessage({event:"session",data:{trigger:"signout"}}),e?.redirect??!0){let e=a.url??t;window.location.href=e,e.includes("#")&&window.location.reload();return}return await B._getSession({event:"storage"}),a}function K(e){if(!z)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:n,refetchInterval:a,refetchWhenOffline:o}=e;n&&(B.basePath=n);let i=void 0!==e.session;B._lastSync=i?j():0;let[c,l]=r.useState(()=>(i&&(B._session=e.session),e.session)),[d,u]=r.useState(!i);r.useEffect(()=>(B._getSession=async({event:e}={})=>{try{let t="storage"===e;if(t||void 0===B._session){B._lastSync=j(),B._session=await V({broadcast:!t}),l(B._session);return}if(!e||null===B._session||j()<B._lastSync)return;B._lastSync=j(),B._session=await V(),l(B._session)}catch(e){W.error(new O(e.message,e))}finally{u(!1)}},B._getSession(),()=>{B._lastSync=0,B._session=void 0,B._getSession=()=>{}}),[]),r.useEffect(()=>{let e=()=>B._getSession({event:"storage"});return F().addEventListener("message",e),()=>F().removeEventListener("message",e)},[]),r.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,n=()=>{t&&"visible"===document.visibilityState&&B._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",n,!1),()=>document.removeEventListener("visibilitychange",n,!1)},[e.refetchOnWindowFocus]);let f=function(){let[e,t]=r.useState("undefined"!=typeof navigator&&navigator.onLine),n=()=>t(!0),s=()=>t(!1);return r.useEffect(()=>(window.addEventListener("online",n),window.addEventListener("offline",s),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}),[]),e}(),p=!1!==o||f;r.useEffect(()=>{if(a&&p){let e=setInterval(()=>{B._session&&B._getSession({event:"poll"})},1e3*a);return()=>clearInterval(e)}},[a,p]);let h=r.useMemo(()=>({data:c,status:d?"loading":c?"authenticated":"unauthenticated",async update(e){if(d||!c)return;u(!0);let t=await I("session",B,W,void 0===e?void 0:{body:{csrfToken:await J(),data:e}});return u(!1),t&&(l(t),F().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[c,d]);return(0,s.jsx)(z.Provider,{value:h,children:t})}}}]);